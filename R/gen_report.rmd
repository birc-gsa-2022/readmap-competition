---
title: "Performance report"
output: md_document
date: "`r Sys.Date()`"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
library(tidyverse)
```

```{r helpers}
lang <- function(proj) {
  proj |> 
    str_to_lower() |>
    when(
      str_starts(., "python")    ~ "Python",
      str_starts(., "go")        ~ "Go",
      str_starts(., "c-cmake")   ~ "C",
      ~ "Unknown"
    )
}

cut_lang <- function(lang, proj) {
  lang |> when(
    (. == "Python") ~ str_replace(proj, "python-", ""),
    (. == "Go")     ~ str_replace(proj, "go-", ""),
    (. == "C")      ~ str_replace(proj, "c-cmake-", "")
  )
}


```

# Readmapper performance report

This is an autogenerated report of the current performance of readmappers that pass the Github Actions tests.

## Status of projects

```{r, results='asis'}
status <- read.table('../status.txt', header = TRUE) |>
  transform(Project = str_replace(Project, "project-5-","")) |>
  mutate(Language = map_chr(Project, lang)) |>
  transform(Team = map2_chr(Language, Project, cut_lang)) |>
  select(Team, Language, Status)
knitr::kable(status, "pipe")
```

## Preprocessing performance

```{r}
pre_perf <- read.csv("../preprocessing.txt", header = TRUE) |>
  split_project_encoding()
pre_perf
```

## Mapping performance

